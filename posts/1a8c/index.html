<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#33363b"><meta name="msapplication-TileColor" content="#33363b"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145268421-1"></script><script>window.dataLayer=window.dataLayer||[];var gtag=function(){dataLayer.push(arguments)};gtag("js",new Date),gtag("config","UA-145268421-1")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?265c38da225b520620b94857150b4d2c";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="keywords" content="Life, ARIA, Hexo"><link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-144x144.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b"><link rel="manifest" href="/favicons/site.webmanifest"><meta name="msapplication-config" content="/favicons/browserconfig.xml"><link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/index.css"><link rel="stylesheet" type="text/css" href="/css/sidebar.css"><link rel="stylesheet" type="text/css" href="/css/page.css"><link rel="stylesheet" type="text/css" href="/css/post.css"><link rel="stylesheet" type="text/css" href="/css/custom.css"><link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css"><link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><script defer="defer" type="text/javascript" src="/js/util.js"></script><script defer="defer" type="text/javascript" src="/js/clipboard.min.js"></script><script defer="defer" type="text/javascript" src="/js/scrollspy.js"></script><script defer="defer" type="text/javascript" src="/js/fontawesome-all.min.js"></script><script defer="defer" type="text/javascript" src="/js/lightgallery.min.js"></script><script defer="defer" type="text/javascript" src="/js/lg-fullscreen.min.js"></script><script defer="defer" type="text/javascript" src="/js/lg-hash.min.js"></script><script defer="defer" type="text/javascript" src="/js/lg-pager.min.js"></script><script defer="defer" type="text/javascript" src="/js/lg-thumbnail.min.js"></script><script defer="defer" type="text/javascript" src="/js/lg-zoom.min.js"></script><script defer="defer" type="text/javascript" src="/js/search.js"></script><script type="text/javascript">$(document).ready(function(){var e="search.xml";0===e.length&&(e="search.xml"),searchFunc("/"+e,"search-input","search-result")})</script><script defer="defer" type="text/javascript" src="/js/index.js"></script><script type="text/javascript">$(document).ready(function(){var t=$(".post figure.highlight");(t.length?($(t).each(function(t,i){}),new ClipboardJS("button.copy",{target:function(t){return t.nextElementSibling.firstChild.firstChild.firstChild.lastChild.firstChild.firstChild}})):(t=$(".post pre code"),$(t).each(function(t,i){}),new ClipboardJS("button.copy",{target:function(t){return t.nextElementSibling.firstChild}}))).on("success",function(t){t.clearSelection();var i=t.trigger;i.innerHTML="已复制",$(i).addClass("copied"),setTimeout(function(){i.innerHTML="复制",$(i).removeClass("copied")},1500)})})</script><script defer="defer" type="text/javascript" src="/js/custom.js"></script><title>大数据系统下的 Lambda 架构 | 科技洞见 - 技术练达即文章</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN" data-spy="scroll" data-target=".list-group"><header id="header" class="header" style="background:#33363b"><div class="container"><div class="header-container"><div class="header-title"><h1 class="title"><a href="/">科技洞见</a></h1><h2 class="subtitle">技术练达即文章</h2></div></div><nav id="nav" class="nav"><a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="切换导航栏"></i></a><ul id="menu" role="menubar" aria-hidden="false"><li role="menuitem"><a href="/"><i class="fas fa-home"></i><span class="menu-text">首页</span></a></li><li role="menuitem"><a href="/archives/"><i class="fas fa-archive"></i><span class="menu-text">归档</span></a></li><li role="menuitem"><a href="/categories/"><i class="fas fa-th-list"></i><span class="menu-text">分类</span></a></li><li role="menuitem"><a href="/tags/"><i class="fas fa-tags"></i><span class="menu-text">标签</span></a></li><li role="menuitem"><a href="/about/"><i class="fas fa-user-edit"></i><span class="menu-text">关于</span></a></li></ul></nav></div></header><main id="main" class="main"><div class="container"><div class="main-container"><div class="content"><div id="post" class="page"><article class="article post card" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://technologiesinsight.com/posts/1a8c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="KevinZhang"><meta itemprop="description" content="技术练达即文章"><meta itemprop="image" content="/images/ava1.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="科技洞见"></span></div><header class="post-header"><h1 class="post-title" itemprop="name headline">大数据系统下的 Lambda 架构</h1><div class="post-meta"><span class="post-date"><i class="far fa-calendar-plus"></i> <span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-08-04T21:39:24+08:00">2019-08-04 21:39:24</time></span></span> <span class="post-meta-divider divider">|</span><span class="post-categories"><i class="far fa-folder-open"></i> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大数据/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大数据/架构/" itemprop="url" rel="index"><span itemprop="name">架构</span></a></span></span> <span class="post-meta-divider divider">|</span><span class="post-comment-count"><i class="far fa-comments"></i><span><a href="/posts/1a8c/#disqus_thread" itemprop="discussionUrl"><span class="post-comment-count disqus-comment-count" data-disqus-identifier="posts/1a8c/" itemprop="commentCount"></span></a></span></span></div></header><main class="post-main" itemprop="articleBody"><p><em>Lambda 架构</em> 是大数据量下的一种数据处理的架构，它同时使用批处理和流处理的方法处理大量数据。</p><a id="more"></a><h1 id="什么是-lambda-架构"><a class="markdownIt-Anchor" href="#什么是-lambda-架构"></a> 什么是 Lambda 架构</h1><p><em>Lambda 架构</em> 是大数据量下的一种数据处理的架构，它同时使用批处理和流处理的方法处理大量数据。<br> <img src="/images/15649951835087.jpg" alt="Lambda 架构"></p><h2 id="lambda-架构分层"><a class="markdownIt-Anchor" href="#lambda-架构分层"></a> Lambda 架构分层</h2><p>标准的 Lambda 架构包含 batch layer(批处理层)、serving layer（服务层）、speed layer(实时层)</p><ul><li>批处理层：包含 master dataset(存储全量数据) 和 batch view (批处理视图)。batch view 是由 master dataset 计算得来</li><li>实时层：由于批处理层数据处理存在延时，如果想获得实时数据，需要实时层的支撑。speed layer 与 batch layer非常相似，它们之间最大的区别是 speed layer 只处理最近的数据，batch layer 则要处理所有的数据。改层一般使用实时计算引擎（如 Spark Streaming、Flink）完成计算</li><li>服务层：对最终结果的查询提供支撑，合并批处理层、实时层结果。 一般使用 NoSQL 数据库存储，如 HBase</li></ul><h1 id="lambda-架构解决的问题"><a class="markdownIt-Anchor" href="#lambda-架构解决的问题"></a> Lambda 架构解决的问题</h1><p>Lambda 架构将两种异构的系统整合，实现了既能分又析历史数据，又能计算实时数据。历史数据保存了所有的明细，可以使用多变的方式分析；实时数据包含最新的信息，可以提供报警、及时分析等能力</p><h1 id="lambda-架构不足"><a class="markdownIt-Anchor" href="#lambda-架构不足"></a> Lambda 架构不足</h1><p>由于实时层和批处理层使用的是不同架构的系统，因此需要对应开发不同的代码，而且需要对同样的数据处理两次：开发者需要熟悉不同的组件、需要维护数据的一致性，都是比较复杂的。<br> <a href="/posts/36c8">Delta Lake</a> 的出现，解决历史数据和实时数据需要不同系统处理的问题。</p><h1 id="lambda-架构在-twitter-的实战"><a class="markdownIt-Anchor" href="#lambda-架构在-twitter-的实战"></a> Lambda 架构在 Twitter 的实战 <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></h1><h2 id="架构图"><a class="markdownIt-Anchor" href="#架构图"></a> 架构图</h2><p><img src="/images/lambda-architecture-2-800.jpg" alt="Lambda 架构图"></p><h2 id="批处理层"><a class="markdownIt-Anchor" href="#批处理层"></a> 批处理层</h2><p>使用 Spark 将全量数据 (master dataset) 批处理为 批处理视图 （batch view），并保存在 NoSQL 数据库 Cassandra 中。使用 Akka 的调度器按一定的时间间隔调度执行</p><figure class="hljs highlight Scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BatchProcessingUnit</span> </span>&#123;<br><br>  <span class="hljs-keyword">val</span> sparkConf = <span class="hljs-keyword">new</span> <span class="hljs-type">SparkConf</span>()<br>    .setAppName(<span class="hljs-string">"Lambda_Batch_Processor"</span>).setMaster(<span class="hljs-string">"local[2]"</span>)<br>    .set(<span class="hljs-string">"spark.cassandra.connection.host"</span>, <span class="hljs-string">"127.0.0.1"</span>)<br>    .set(<span class="hljs-string">"spark.cassandra.auth.username"</span>, <span class="hljs-string">"cassandra"</span>)<br><br>  <span class="hljs-keyword">val</span> sc = <span class="hljs-keyword">new</span> <span class="hljs-type">SparkContext</span>(sparkConf)<br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start</span></span>: <span class="hljs-type">Unit</span> =&#123;<br>    <span class="hljs-keyword">val</span> rdd = sc.cassandraTable(<span class="hljs-string">"master_dataset"</span>, <span class="hljs-string">"tweets"</span>)<br>    <span class="hljs-keyword">val</span> result = rdd.select(<span class="hljs-string">"userid"</span>,<span class="hljs-string">"createdat"</span>,<span class="hljs-string">"friendscount"</span>).where(<span class="hljs-string">"friendsCount &gt; ?"</span>, <span class="hljs-number">500</span>)<br>    result.saveToCassandra(<span class="hljs-string">"batch_view"</span>,<span class="hljs-string">"friendcountview"</span>,<span class="hljs-type">SomeColumns</span>(<span class="hljs-string">"userid"</span>,<span class="hljs-string">"createdat"</span>,<span class="hljs-string">"friendscount"</span>))<br>    result.foreach(println)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="实时层"><a class="markdownIt-Anchor" href="#实时层"></a> 实时层</h2><p>实时层使用 Spark Streaming 实时处理 Kafka 消息，同样将计算结果存储在 Cassandra 中。</p><figure class="hljs highlight Scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">SparkStreamingKafkaConsumer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">App</span> </span>&#123;<br>  <span class="hljs-keyword">val</span> brokers = <span class="hljs-string">"localhost:9092"</span><br>  <span class="hljs-keyword">val</span> sparkConf = <span class="hljs-keyword">new</span> <span class="hljs-type">SparkConf</span>().setAppName(<span class="hljs-string">"KafkaDirectStreaming"</span>).setMaster(<span class="hljs-string">"local[2]"</span>)<br>    .set(<span class="hljs-string">"spark.cassandra.connection.host"</span>, <span class="hljs-string">"127.0.0.1"</span>)<br>    .set(<span class="hljs-string">"spark.cassandra.auth.username"</span>, <span class="hljs-string">"cassandra"</span>)<br>  <span class="hljs-keyword">val</span> ssc = <span class="hljs-keyword">new</span> <span class="hljs-type">StreamingContext</span>(sparkConf, <span class="hljs-type">Seconds</span>(<span class="hljs-number">10</span>))<br>  ssc.checkpoint(<span class="hljs-string">"checkpointDir"</span>)<br>  <span class="hljs-keyword">val</span> topicsSet = <span class="hljs-type">Set</span>(<span class="hljs-string">"tweets"</span>)<br>  <span class="hljs-keyword">val</span> kafkaParams = <span class="hljs-type">Map</span>[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>](<span class="hljs-string">"metadata.broker.list"</span> -&gt; brokers, <span class="hljs-string">"group.id"</span> -&gt; <span class="hljs-string">"spark_streaming"</span>)<br>  <span class="hljs-keyword">val</span> messages: <span class="hljs-type">InputDStream</span>[(<span class="hljs-type">String</span>, <span class="hljs-type">String</span>)] = <span class="hljs-type">KafkaUtils</span>.createDirectStream[<span class="hljs-type">String</span>, <span class="hljs-type">String</span>, <span class="hljs-type">StringDecoder</span>, <span class="hljs-type">StringDecoder</span>](ssc, kafkaParams, topicsSet)<br>  <span class="hljs-keyword">val</span> tweets: <span class="hljs-type">DStream</span>[<span class="hljs-type">String</span>] = messages.map &#123; <span class="hljs-keyword">case</span> (key, message) =&gt; message &#125;<br>  <span class="hljs-type">ViewHandler</span>.createAllView(ssc.sparkContext, tweets)<br>  ssc.start()<br>  ssc.awaitTermination()<br>&#125;<br></code></pre></td></tr></table></figure><p>下面是 ViewHandler 的处理逻辑，主要是选择 follow 者数量大于 500 的记录</p><figure class="hljs highlight Scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs Scala"><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ViewHandler</span> </span>&#123;<br><br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createAllView</span></span>(sparkContext: <span class="hljs-type">SparkContext</span>, tweets: <span class="hljs-type">DStream</span>[<span class="hljs-type">String</span>]) = &#123;<br>    createViewForFriendCount(sparkContext, tweets)<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createViewForFriendCount</span></span>(sparkContext: <span class="hljs-type">SparkContext</span>, tweets: <span class="hljs-type">DStream</span>[<span class="hljs-type">String</span>]) = &#123;<br><br>    tweets.foreachRDD &#123; (rdd: <span class="hljs-type">RDD</span>[<span class="hljs-type">String</span>], time: <span class="hljs-type">Time</span>) =&gt;<br>      <span class="hljs-keyword">val</span> spark = <span class="hljs-type">SparkSession</span>.builder.config(rdd.sparkContext.getConf).getOrCreate()<br>      <span class="hljs-keyword">val</span> tweets: <span class="hljs-type">DataFrame</span> = spark.sqlContext.read.json(rdd)<br>      tweets.createOrReplaceTempView(<span class="hljs-string">"tweets"</span>)<br>      <span class="hljs-keyword">val</span> wordCountsDataFrame: <span class="hljs-type">DataFrame</span> = spark.sql(<span class="hljs-string">"SELECT userId,createdAt, friendsCount from tweets Where friendsCount &gt; 500 "</span>)<br>      <span class="hljs-keyword">val</span> res: <span class="hljs-type">DataFrame</span> = wordCountsDataFrame.withColumnRenamed(<span class="hljs-string">"userId"</span>,<span class="hljs-string">"userid"</span>).withColumnRenamed(<span class="hljs-string">"createdAt"</span>,<span class="hljs-string">"createdat"</span>).withColumnRenamed(<span class="hljs-string">"friendsCount"</span>,<span class="hljs-string">"friendscount"</span>)<br>      res.write.mode(<span class="hljs-type">SaveMode</span>.<span class="hljs-type">Append</span>)<br>        .format(<span class="hljs-string">"org.apache.spark.sql.cassandra"</span>)<br>        .options(<span class="hljs-type">Map</span>( <span class="hljs-string">"table"</span> -&gt; <span class="hljs-string">"friendcountview"</span>, <span class="hljs-string">"keyspace"</span> -&gt; <span class="hljs-string">"realtime_view"</span>))<br>        .save()<br>      wordCountsDataFrame.show(<span class="hljs-literal">false</span>)<br>      wordCountsDataFrame.printSchema()<br><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="服务层"><a class="markdownIt-Anchor" href="#服务层"></a> 服务层</h2><p>服务层聚合了批处理层和实时层的数据，以满足 Ad hoc 的需要</p><figure class="hljs highlight Scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Scala"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findTwitterUsers</span></span>(minute: <span class="hljs-type">Long</span>, second: <span class="hljs-type">Long</span>, tableName: <span class="hljs-type">String</span> = <span class="hljs-string">"tweets"</span>): <span class="hljs-type">Response</span> = &#123;<br>  <span class="hljs-keyword">val</span> batchInterval = <span class="hljs-type">System</span>.currentTimeMillis() - minute * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span><br>  <span class="hljs-keyword">val</span> realTimeInterval = <span class="hljs-type">System</span>.currentTimeMillis() - second * <span class="hljs-number">1000</span><br>  <span class="hljs-keyword">val</span> batchViewResult = cassandraConn.execute(<span class="hljs-string">s"select * from batch_view.friendcountview where createdat &gt;= <span class="hljs-subst">$&#123;batchInterval&#125;</span> allow filtering;"</span>).all().toList<br>  <span class="hljs-keyword">val</span> realTimeViewResult = cassandraConn.execute(<span class="hljs-string">s"select * from realtime_view.friendcountview where createdat &gt;= <span class="hljs-subst">$&#123;realTimeInterval&#125;</span> allow filtering;"</span>).all().toList<br>  <span class="hljs-keyword">val</span> twitterUsers: <span class="hljs-type">ListBuffer</span>[<span class="hljs-type">TwitterUser</span>] = <span class="hljs-type">ListBuffer</span>()<br>  batchViewResult.map &#123; row =&gt;<br>    twitterUsers += <span class="hljs-type">TwitterUser</span>(row.getLong(<span class="hljs-string">"userid"</span>), <span class="hljs-keyword">new</span> <span class="hljs-type">Date</span>(row.getLong(<span class="hljs-string">"createdat"</span>)), row.getLong(<span class="hljs-string">"friendscount"</span>))<br>  &#125;<br>  realTimeViewResult.map &#123; row =&gt;<br>    twitterUsers += <span class="hljs-type">TwitterUser</span>(row.getLong(<span class="hljs-string">"userid"</span>), <span class="hljs-keyword">new</span> <span class="hljs-type">Date</span>(row.getLong(<span class="hljs-string">"createdat"</span>)), row.getLong(<span class="hljs-string">"friendscount"</span>))<br>  &#125;<br>  <span class="hljs-type">Response</span>(twitterUsers.length, twitterUsers.toList)<br>&#125;<br></code></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://blog.knoldus.com/twitters-tweets-analysis-using-lambda-architecture/" rel="external nofollow noopener noreferrer" target="_blank">https://blog.knoldus.com/twitters-tweets-analysis-using-lambda-architecture/</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section></main><footer class="post-footer"><div class="post-tags"><a class="post-tag button" href="/tags/原创/" rel="tag"><i class="fas fa-tags"></i> 原创</a><a class="post-tag button" href="/tags/架构/" rel="tag"><i class="fas fa-tags"></i> 架构</a></div></footer></article><nav class="page-nav"><div class="page-nav-next page-nav-item"><a href="/posts/9cee/" rel="next" title="基准测试(Benchmark) JMH 实战篇"><i class="fas fa-angle-left"></i> <span class="nav-title">基准测试(Benchmark) JMH 实战篇</span></a></div><div class="page-nav-prev page-nav-item"> <a href="/posts/36c8/" rel="prev" title="Delta Lake 全面解析"><span class="nav-title">Delta Lake 全面解析</span><i class="fas fa-angle-right"></i></a></div></nav><div class="comments" id="comments"><script defer="defer" id="dsq-count-scr" src="//technologiesinsight.disqus.com/count.js"></script><div id="disqus_thread" class="disqus_thread"></div><script type="text/javascript">var disqus_config=function(){this.page.url="https://technologiesinsight.com/posts/1a8c/",this.page.identifier="posts/1a8c/"};!function(){var t=document,e=t.createElement("script");e.src="https://technologiesinsight.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script></div></div></div><aside class="sidebar" id="sidebar" style="background:url(/images/background.png)"><div class="search"><div class="form-group"><i class="fas fa-search"></i> <input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control"></div></div><div class="search-result-box" id="search-result"></div><div class="info sidebar-item" id="info"> <img class="author-avatar" src="/images/ava1.jpg" alt="KevinZhang"><h1 class="author-name">KevinZhang</h1><h2 class="author-description">技术练达即文章</h2><div class="site-count"><div class="archives-count count-block"><div class="site-count-title">归档</div><div><a href="/archives/">5</a></div></div><div class="categories-count count-block"><div class="site-count-title">分类</div><div><a href="/categories/">4</a></div></div><div class="tags-count count-block"><div class="site-count-title">标签</div><div><a href="/tags/">8</a></div></div></div></div><div class="sidebar-sticky"><hr><div class="post-toc sidebar-item" id="toc-div"><div><i class="fas fa-list-ol"></i>文章目录</div><div class="post-toc-content"><ol class="list-group toc"><li class="toc-item toc-level-1"> <a class="list-group-item toc-link" href="#什么是-lambda-架构"><span class="toc-text">什么是 Lambda 架构</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-2"> <a class="list-group-item toc-link" href="#lambda-架构分层"><span class="toc-text">Lambda 架构分层</span></a></li></ol></li><li class="toc-item toc-level-1"> <a class="list-group-item toc-link" href="#lambda-架构解决的问题"><span class="toc-text">Lambda 架构解决的问题</span></a></li><li class="toc-item toc-level-1"> <a class="list-group-item toc-link" href="#lambda-架构不足"><span class="toc-text">Lambda 架构不足</span></a></li><li class="toc-item toc-level-1"> <a class="list-group-item toc-link" href="#lambda-架构在-twitter-的实战"><span class="toc-text">Lambda 架构在 Twitter 的实战 [1]</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-2"> <a class="list-group-item toc-link" href="#架构图"><span class="toc-text">架构图</span></a></li><li class="toc-item toc-level-2"> <a class="list-group-item toc-link" href="#批处理层"><span class="toc-text">批处理层</span></a></li><li class="toc-item toc-level-2"> <a class="list-group-item toc-link" href="#实时层"><span class="toc-text">实时层</span></a></li><li class="toc-item toc-level-2"> <a class="list-group-item toc-link" href="#服务层"><span class="toc-text">服务层</span></a></li></ol></li></ol></div></div><hr><div class="social-link sidebar-item"><div><i class="far fa-address-card"></i>社交链接<p></p></div><ul><li><i class="fas fa-envelope"></i><a href="mailto:kevin.zhang.me@gmail.com" target="_blank" rel="external nofollow noopener noreferrer">E-Mail</a></li><li><i class="fab fa-github"></i><a href="https://github.com/KevinZhangMe" target="_blank" rel="external nofollow noopener noreferrer">GitHub</a></li></ul></div></div></aside></div></div></main><footer id="footer" class="footer" style="background:#33363b"><div class="container"><div class="back-to-top"> <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="回到顶部"></i></button></div><div class="footer-container"><div class="footer-left"><div class="copyright"> <span class="author">KevinZhang</span><span class="year"><i class="far fa-copyright"></i>2019</span></div></div><div class="footer-right"><div class="custom-info"></div><div class="powered-by"> 由 <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> 强力驱动</div></div></div></div></footer></body></html>